<!DOCTYPE html PUBLIC "-//w3c//dtd html 4.0 transitional//en">
<html><head>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <meta title="UE INF304 - TP7">
<style>
emph {
  font-weight: bold;
}

#content {
  margin: 0% auto;
  width: 80ex;
  max-width: 80%;
  align: center;
}

p, ul, ol, li {
  text-align: justify;
}

h1,h2 {
text-align: center;
}

h5:before {
  content: "\25B6\00A0" ;
}

.important {
   color: #FF0000;
}

.nom { font-family: sans-serif; font-weight:bold; }

.code { font-family: monospace; }

.file { font-family: monospace; }

.commande { font-family: monospace; }

.algo { 
font-family: sans-serif; 
border: solid 1px #DDD;
background-color: #F9F9F9;
padding: 1ex;
margin:5%;
}

pre.code {
border: solid 1px #DDD;
background-color: #F9F9F9;
padding: 1ex;
margin:5%;
}

.text { font-style: oblique; }
.comment { font-style: oblique; }

.kw { font-weight: bold; color: #007700;}

.block {
  border-left: solid 2px #009900; 
  padding: 0px;
  margin: 0px;
  padding-left: 1ex;
  padding-bottom: 4px;
  margin-left: 4ex;
}

table { border: solid 1px; border-collapse: collapse; margin: auto; }
th,td { border: solid 1px; padding: 5px; }
td.notation { border-left: none; border-right: none;}

</style>

</head><body>


<div id="content">

  <h1>INF304 — TP7</h1>

  <h2>Curiosity Revolutions (2)<br>Tests de programmes robots</h2>

  <p>Ce TP est la suite du TP précédent ; placez-vous dans le
  répertoire du TP6, et copiez-y les fichiers nécessaires au TP7 :
</p><pre class="code">cp -r /Public/304_INF_Public/TP7/* .
</pre>
<p></p>
  <p>
    <strong>NB</strong> : vous avez normalement complété au TP6 les
    fichiers <span class="file">robot.c</span>
    et <span class="file">terrain.c</span>. Si vous n'avez pas eu le
    temps de finir, vous pouvez récupérer une version corrigée de ces
    deux fichiers dans le répertoire
    <span class="file">/Public/304_INF_Public/Correction-TP6</span>.
  </p>

<h3>Un programme simple d'interprétation d'un programme-robot</h3>

  <p>
    Le programme fourni <span class="file">curiosity.c</span> prend en
    argument un nom de fichier terrain, et un nom de fichier
    programme, et interprète simplement le programme sur le terrain.
  </p>

  <p>Lisez ce programme, et compilez-le à l'aide
    du <span class="file">Makefile</span> fourni.</p>

<h5>Exercice 1.</h5>

<p>Testez ce programme sur les exemples de terrains et de programmes
  fournis, puis sur plusieurs terrains et programmes de votre cru.</p>

<h3>Test fonctionnel de l'interprète</h3>

<p>On souhaite maintenant tester de manière intensive le
  paquetage <span class="file">interprete</span>.
</p>

<h5>Exercice 2.</h5>

<p>Écrivez un programme de test, nommé <span class="file">curiosity-test.c</span>, prenant en argument le nom d'un
  fichier de test dont le format est le suivant :
  </p><ol>
    <li>sur une ligne, un nom de fichier terrain ;</li>
    <li>sur une ligne, un nom de fichier programme ;</li>
    <li>sur une ligne, le nombre de pas maximum d'exécution ;</li>
    <li>sur une ligne, un caractère <i>e</i> indiquant l'évènement
      attendu à la fin de l'exécution :
      <ul>
        <li>«<span class="code">N</span>» si le robot est sur une position normale à l'intérieur du terrain,</li>
        <li>«<span class="code">F</span>» si le programme est terminé,</li>
        <li>«<span class="code">S</span>» si le robot est sorti du terrain,</li>
        <li>«<span class="code">O</span>» si le robot a rencontré un obstacle,</li>
        <li>«<span class="code">P</span>» si le robot est tombé dans
          l'eau ;</li>
      </ul>
    </li>
  </ol>
  si <i>e=<span class="code">N</span></i>
  ou <i>e=<span class="code">F</span></i>&nbsp;:
  <ol value="5">
    <li>deux entiers <i>x</i> et <i>y</i>, la position attendue du
      robot à la fin de l'exécution ;</li>
    <li>un caractère
      <i>o</i> parmi
      {<span class="code">N</span>,<span class="code">S</span>,<span class="code">E</span>,<span class="code">O</span>},
      l'orientation attendue du robot à la fin de l'exécution.</li>
  </ol>
<p></p>

<!-- Mise à jour oct 2021, ce n'est plus le cas : le programme est bien "terminé" lorsque la dernière instruction a été exécutée -->
<!-- <p><strong>NB</strong> : le programme est «terminé» quand la fonction -->
<!--   <span class="code">exec_pas</span> -->
<!--   renvoie <span class="code">ARRET_ROBOT</span>, c'est-à-dire quand -->
<!--   elle est appelée alors qu'il ne reste plus d'instruction à -->
<!--   exécuter. Lorsque la dernière instruction est exécutée, la fonction -->
<!--   <span class="code">exec_pas</span> -->
<!--   renvoie <span class="code">OK_ROBOT</span>, il faut exécuter encore -->
<!--   une fois la fonction pour obtenir <span class="code">ARRET_ROBOT</span>.</p> -->

  <p>Ce programme de test doit initialiser l'environnement en lisant
  les fichiers de terrain et de programme, puis interpréter le
  programme jusqu'à l'événement de fin ou le nombre de pas maximum
  atteint. Il doit ensuite vérifier que l'événement obtenu et
  éventuellement la position du robot correspondent à ce qui est
  attendu et spécifié dans le fichier de test lu, et afficher un
  diagnostic simple («Ok» si tout va bien, une ou quelques lignes
  d'explications sinon).</p>

<p><strong>NB</strong> : vous pouvez vous inspirer de la structure
  du programme <span class="file">curiosity.c</span>.</p>

  <p>Compilez et essayez votre programme avec quelques premiers tests.</p>

<h5>Exercice 3.</h5>

<p>Écrivez un jeu complet de tests permettant de tester
  l'interprète. Tester soigneusement chaque cas (chaque commande du
  langage, plusieurs enchaînements de commandes, des programmes plus
  compliqués, chaque type d'événement de fin).</p>

<h5>Exercice 4.</h5>

  <p>Les fichiers <span class="file">interprete<i>i</i>.c</span>,
    avec <i>i</i> = 0,...,9, représentent 10 implémentations
    légèrement différentes de l'interprète. Parmi ces 10
    implémentations, certaines comportent des erreurs.</p>

  <p>Le <span class="file">Makefile</span> peut être utilisé pour
    produire un
    exécutable <span class="file">curiosity-test<i>i</i></span>, à
    partir du programme <span class="file">curiosity-test.c</span> et
    de
    l'implémentation <span class="file">interprete<i>i</i>.c</span>,
    en tapant simplement (pour <i>i</i> = 0) :
    </p><pre class="code">make curiosity-test0
    </pre>
  <p></p>

  <p>Utilisez votre jeu de test pour identifier les implémentations
    correctes.</p>

  <p><strong>NB</strong> : vous pouvez éventuellement modifier votre
    programme de test, afin qu'il prenne en argument
    une <em>liste</em> de nom de fichiers de test, et qu'il affiche
    pour <em>chaque</em> test si le résultat est correct ou non.</p>

  <p>Indiquez sur la page Moodle
    <a href="http://caseine.org/mod/quiz/view.php?id=10145">quelles
      implémentations sont selon vous correctes</a>.</p>
   
<h3>Tests de robustesse de l'interprète</h3>

<h5>Exercice 5.</h5>

  <p>Écrire des exemples de programmes déclenchant une erreur :
    </p><ul>
      <li>à la lecture du programme ;</li>
      <li>à l'exécution du programme.</li>
    </ul>
    Vérifiez que ces erreurs sont correctement gérées.
  <p></p>


  <h5>Exercice 6. (bonus)</h5>

<p>Du fait de l'implémentation, certaines erreurs dans les
  programmes-robot ne sont pas gérées par le
  paquetage <span class="file">interprete</span>.</p>

<p>Autrement dit, on peut écrire des programmes incorrects qui seront
  lus et interprétés sans retourner d'erreur parmi celles
  déclarées.
</p>
<p>Pouvez-vous identifier ces erreurs ? Écrivez un exemple de
  programme contenant une telle erreur.
</p>
  
<h3>3. Compte-rendu</h3>
<p>
</p><ol>
<li>Créez un répertoire 
<span class="file">Tests_TP7</span>
et placez-y l'ensemble des fichiers tests créés
lors de l'exercice&nbsp;3.

</li><li>Compactez le répertoire <span class="file">Tests_TP7</span> :
  <pre class="code">    tar czvf Tests_TP7.tar.gz Tests_TP7
  </pre>
  Déposez le fichier <span class="file">Tests_TP7.tar.gz</span>
  sur <a href="http://caseine.org/course/view.php?id=172">la
  page moodle du cours.</a></li>
</ol>
<p></p>

  
</div>

</body></html>